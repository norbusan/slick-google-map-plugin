(function(){function p(h){(function(a){function h(){a("object.sgmp-json-string-placeholder").each(function(e,D){var n=a(D).attr("id"),n=a(D).find("param#json-string-"+n).val(),n=y.searchReplace(n,"'",""),n=n.replace("&quot;",""),b=p(n);if("undefined"===typeof b||!b)return f.fatal("We did not parse JSON from OBJECT param. Aborting map generation .."),!1;if(0<a("div#"+b.id).length){n=document.getElementById(b.id);if("true"===SGMPGlobal.mapFillViewport&&is_mobile_device()){n.style.width="100%";var l=
    a(window).height()+"";-1!=l.indexOf("px")?n.style.height=l:-1!=l.indexOf("%")?n.style.height="100%":n.style.height=l+"px"}var h=new google.maps.Map(n);if("undefined"!==typeof b.styles&&""!==y.trim(b.styles)){b.styles=base64_decode(b.styles);try{b.styles=p(b.styles)}catch(r){f.fatal("Could not parse map styles as a JSON object"),b.styles=""}}else b.styles="";v.initMap(h,b.bubbleautopan,parseInt(b.zoom),b.maptype,b.styles);u.init(h);n=new N;n.init(h,b.bubbleautopan,b.distanceunits,b);n.setGeoLocationIfEnabled(b.enablegeolocationmarker);
    v.setMapControls({mapTypeControl:"true"===b.maptypecontrol,panControl:"true"===b.pancontrol,zoomControl:"true"===b.zoomcontrol,scaleControl:"true"===b.scalecontrol,scrollwheel:"true"===b.scrollwheelcontrol,streetViewControl:"true"===b.streetviewcontrol,tilt:"true"===b.tiltfourtyfive?45:null,draggable:"true"===b.draggable,overviewMapControl:!0,overviewMapControlOptions:{opened:!1}});"true"===b.showpanoramio&&u.buildPanoramioLayer(b.panoramiouid);"true"===b.showbike&&u.buildBikeLayer();"true"===b.showtraffic&&
    u.buildTrafficLayer();null!=b.kml&&""!=y.trim(b.kml)?u.buildKmlLayer(b.kml):(null!=b.markerlist&&""!=y.trim(b.markerlist)&&n.buildAddressMarkers(b.markerlist,b.addmarkermashup,b.addmarkermashupbubble),n.isBuildAddressMarkersCalled()||f.fatal("No markers specified for the Google map.."));a(document).ready(function(){function n(){null!=e&&clearTimeout(e);e=a(p).is(":hidden")?setTimeout(n,l):setTimeout(function(){D(h)},l)}function D(a){null!=e&&clearTimeout(e);a&&(google.maps.event.trigger(a,"resize"),
        e=setTimeout(function(){null!=e&&clearTimeout(e);a&&google.maps.event.trigger(a,"click")},l/2))}var e=null,l=500,p="div#"+b.id;a(p).is(":hidden")?(f.warn("Map placeholder DIV is hidden, must resize the map!"),n()):e=setTimeout(function(){n()},3*l)})}else f.fatal("It looks like the map DIV placeholder ID ["+b.id+"] does not exist in the page!")})}var p=function(a){},t=parseFloat(a.fn.jquery.split(".")[0]),r=parseFloat(a.fn.jquery.split(".")[1]);1<=t&&2>t&&4<=r?p=a.parseJSON:window.JSON&&window.JSON.parse?
    p=window.JSON.parse:f.fatal("Using parseJson stub..");var v=function(){var a={};return{initMap:function(f,n,b,l,h){a=f;f=[];for(var p in google.maps.MapTypeId)f.push(google.maps.MapTypeId[p]);"OSM"==l?(f.push(l),a.mapTypes.set(l,new google.maps.ImageMapType({getTileUrl:function(a,b){return"http://tile.openstreetmap.org/"+b+"/"+a.x+"/"+a.y+".png"},tileSize:new google.maps.Size(256,256),name:"OpenStreet",maxZoom:20}))):"ROADMAP"==l?l=google.maps.MapTypeId.ROADMAP:"SATELLITE"==l?l=google.maps.MapTypeId.SATELLITE:
        "HYBRID"==l?l=google.maps.MapTypeId.HYBRID:"TERRAIN"==l&&(l=google.maps.MapTypeId.TERRAIN);a.setOptions({zoom:b,mapTypeId:l,styles:h,mapTypeControlOptions:{mapTypeIds:f}})},setMapControls:function(f){a.setOptions(f)}}}(),u=function(){var a={};return{init:function(f){a=f},buildKmlLayer:function(h){if(0>h.toLowerCase().indexOf("http"))return f.error("KML URL must start with HTTP(S). Aborting.."),!1;var n=new google.maps.KmlLayer(h);google.maps.event.addListener(n,"status_changed",function(){var a=n.getStatus();
        if(a!=google.maps.KmlLayerStatus.OK){var l="";switch(a){case google.maps.KmlLayerStatus.DOCUMENT_NOT_FOUND:l=SGMPGlobal.kmlNotFound;break;case google.maps.KmlLayerStatus.DOCUMENT_TOO_LARGE:l=SGMPGlobal.kmlTooLarge;break;case google.maps.KmlLayerStatus.FETCH_ERROR:l=SGMPGlobal.kmlFetchError;break;case google.maps.KmlLayerStatus.INVALID_DOCUMENT:l=SGMPGlobal.kmlDocInvalid;break;case google.maps.KmlLayerStatus.INVALID_REQUEST:l=SGMPGlobal.kmlRequestInvalid;break;case google.maps.KmlLayerStatus.LIMITS_EXCEEDED:l=
            SGMPGlobal.kmlLimits;break;case google.maps.KmlLayerStatus.TIMED_OUT:l=SGMPGlobal.kmlTimedOut;break;case google.maps.KmlLayerStatus.UNKNOWN:l=SGMPGlobal.kmlUnknown}if(""!=l){var e=SGMPGlobal.kml.replace("[TITLE]","<b>Simple Google Map Plugin</b><br /><br /><b>Google KML error:</b><br />"),e=e.replace("[MSG]",l);e.replace("[STATUS]",a);f.error("Google returned KML error: "+l+" ("+a+")");f.error("KML file: "+n.getUrl())}}});google.maps.event.addListener(n,"defaultviewport_changed",function(){});
        n.setMap(a)},buildTrafficLayer:function(){(new google.maps.TrafficLayer).setMap(a)},buildBikeLayer:function(){(new google.maps.BicyclingLayer).setMap(a)},buildPanoramioLayer:function(h){if("undefined"===typeof google.maps.panoramio||!google.maps.panoramio||null==google.maps.panoramio)return f.error("We cannot access Panoramio library. Aborting.."),!1;var n=new google.maps.panoramio.PanoramioLayer;n?(null!=h&&""!=h&&n.setUserId(h),n.setMap(a)):f.error("Could not instantiate Panoramio object. Aborting..")}}}(),
    N=function(){function h(){clearTimeout(I);if(0<E.length){var d=E.shift();f.info("Geocoding '"+d.address+"' Left "+E.length+" items to geocode..");S.geocode({address:d.address},function(a,c){D(a,c,d)})}else{r();if(T){var k=!1,c=document.head||document.getElementsByTagName("head")[0]||document.documentElement,g=document.createElement("script");g.type="text/javascript";g.src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js";g.onload=g.onreadystatechange=
        function(){k||this.readyState&&!/loaded|complete/.test(g.readyState)||(k=!0,google.maps.event.removeListener(U),markerClusterer=new MarkerClusterer(s,x,{averageCenter:!0,zoomOnClick:!0}),g.onload=g.onreadystatechange=null,c&&g.parentNode&&c.removeChild(g),g=void 0)};c.appendChild(g)}if(O){f.warn("Reset server map data cache required");if(V){a.each(x,function(d,c){var k=(c.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(P,function(a,d){if(a===c.content&&-1!=d.validated_address_csv_data.indexOf(SGMPGlobal.geoValidationClientRevalidate))return d.validated_address_csv_data=
        d.validated_address_csv_data.replace(RegExp(SGMPGlobal.geoValidationClientRevalidate,"g"),k),!1})});var b=JSON.stringify(P);a.post(SGMPGlobal.ajaxurl,{action:SGMPGlobal.ajaxCacheMapAction,data:b,geoMashup:"true",timestamp:SGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");null!=a&&"OK"===a&&f.info("Map geo mashup cache was reset on the server")})}else{var n=F.markerlist.split("|"),l=F.debug.widget_id,e=F.debug.post_id,m=F.debug.post_type,p=F.debug.shortcodeid,q=[];a.each(x,
        function(d,c){var k=(c.position+"").replace(RegExp("\\(|\\)","g"),"");a.each(n,function(a,g){var b=g.split(SGMPGlobal.sep);if(b[0]===c.content)return f.info(b[0]+" matched "+c.content+" (marker#"+(d+1)+")"),-1!=g.indexOf(SGMPGlobal.geoValidationClientRevalidate)?q[d]=g.replace(RegExp(SGMPGlobal.geoValidationClientRevalidate,"g"),k):q[d]=g,!1})});b=q.join("|");"undefined"!==typeof l&&"undefined"!==l?a.post(SGMPGlobal.ajaxurl,{action:SGMPGlobal.ajaxCacheMapAction,data:b,geoMashup:"false",widgetId:l,
        timestamp:SGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");null!=a&&"OK_WIDGET"===a&&f.info("Map cache was reset on the server for widget#"+l)}):"undefined"!==typeof e&&"undefined"!==e&&a.post(SGMPGlobal.ajaxurl,{action:SGMPGlobal.ajaxCacheMapAction,data:b,geoMashup:"false",postId:e,postType:m,shortcodeId:p,timestamp:SGMPGlobal.timestamp},function(a){f.info("Posting map data to the server..");null!=a&&("OK_POST"===a?f.info("Map cache was reset on the server for post#"+
        e+" shortcode#"+p):"OK_PAGE"===a?f.info("Map cache was reset on the server for page#"+e+" shortcode#"+p):"OK_CUSTOM"===a&&f.info("Map cache was reset on the server for type "+m+"#"+e+" shortcode#"+p))})}O=!1}f.info("Have "+x.length+" markers on the map")}}function D(a,k,c){k==google.maps.GeocoderStatus.OK?(f.info("Geocoding '"+c.address+"' OK!"),l(a[0].geometry.location,c),I=setTimeout(function(){h()},200)):k==google.maps.GeocoderStatus.OVER_QUERY_LIMIT?(f.warn("Geocoding '"+c.address+"' OVER_QUERY_LIMIT!"),
        r(),E.push(c),I=setTimeout(function(){h()},2200)):(k==google.maps.GeocoderStatus.ZERO_RESULTS?f.warn("Geocoding '"+c.address+"' ZERO_RESULTS!"):f.warn("Geocoding '"+c.address+"' "+k+"!"),I=setTimeout(function(){h()},200))}function n(d,k){var c=1;P=d;a.each(d,function(a,d){if("live_debug"===a||"debug"===a)return!0;null==this.excerpt&&(this.excerpt="");"undefined"!==typeof this.validated_address_csv_data&&""!==this.validated_address_csv_data||f.error("Validated address from: "+this.permalink+" returned empty, perhaps OVER_QUERY_LIMIT when validating on the server..");
        b(this.validated_address_csv_data,this.title,this.permalink,this.excerpt,k,!0);c++})}function b(a,k,c,g,b,n){if("undefined"===typeof a||""===a)f.fatal("Not parsing empty validated address csv data.. Skipping");else{f.info("Raw: "+a);a=a.split("|");for(var h=0;h<a.length;h++){var e=a[h];if(null!=e&&""!=e){var e=e.split(SGMPGlobal.sep),p=e[0],m=e[1],q=e[2],e=e[3];-1!=q.indexOf(SGMPGlobal.noBubbleDescriptionProvided)&&(q="");p={address:p,animation:google.maps.Animation.DROP,zIndex:h+1,markerIcon:m,customBubbleText:q,
        markerHoverText:q+" ("+p+")",postTitle:k,postLink:c,postExcerpt:g,infoBubbleContainPostLink:b,geoMashup:n};if(e===SGMPGlobal.geoValidationClientRevalidate)O=!0,E.push(p);else{m=[];-1!=e.indexOf(",")?m=e.split(","):-1!=e.indexOf(";")&&(m=e.split(";"));m[0]=y.trim(m[0]);m[1]=y.trim(m[1]);if(""===m[0]||""===m[1])return f.warn("Lat or Long are empty string"),!1;e=new google.maps.LatLng(parseFloat(m[0]),parseFloat(m[1]));l(e,p)}}}}}function l(a,k){var c=new google.maps.Marker({position:a,title:k.markerHoverText,
        content:k.address,zIndex:k.zIndex+1E3,map:s});if(c){f.info("Built marker: "+k.address+" "+a);if(k.markerIcon){var g=k.markerIcon;if("undefined"==typeof g||"undefined"===g)g="1-default.png";"1-default.png"!==g&&c.setIcon(SGMPGlobal.customMarkersUri+g)}v(c,k);Q||(Z(),Q=!0);x.push(c)}}function r(){var d=!1,k=null==w?!1:!0;1<x.length?(a.each(x,function(a,d){z.contains(d.position)||z.extend(d.position)}),d=!0):1==x.length&&(k?(z.extend(x[0].position),d=!0):(s.setCenter(x[0].position),L=s.getZoom(),J=s.getCenter()));
        d&&(k&&null!=w.getPosition()&&(f.info("Extended bounds with Geo marker position: "+w.getPosition()),z.extend(w.getPosition())),B=z,null!=z&&s.fitBounds(z))}function u(){null!=B?s.getCenter()!=B.getCenter()&&(f.info("Panning map back to its original bounds center: "+B.getCenter()),s.fitBounds(B),s.setCenter(B.getCenter())):null!=J&&(f.info("Panning map back to its original center: "+J+" and updated zoom: "+L),s.setCenter(J),s.setZoom(L))}function t(d){a(d+" input#a_address").val("");a(d+" input#b_address").val("");
        a(d+" input#a_address").removeClass("d_error");a(d+" input#b_address").removeClass("d_error");a("input#"+m+"_avoid_hway").prop("checked",!1);a("input#"+m+"_avoid_tolls").prop("checked",!1);a("input#"+m+"_radio_km").prop("checked",!1);a("input#"+m+"_radio_miles").prop("checked",!0)}function v(d,k){var c=$(d.content,k),g="div#direction-controls-placeholder-"+m,b=a("div#rendered-directions-placeholder-"+m);google.maps.event.addListener(d,"click",function(){t(g);a(g).fadeOut();G.setMap(null);b.html("");
        b.hide();a(g+" button#print_sub").hide();N(d,c,g);A(d,c,g,b);C.setContent(c.bubbleContent);C.setOptions({disableAutoPan:"true"===W?!1:!0});C.open(s,this)})}function A(d,k,c,g){var b="div#bubble-"+k.bubbleHolderId,e=d.content,e=e.replace("Lat/Long: ",""),f=!1==(null==w?!1:!0)||null==w.getPosition()?"":w.getPosition();a(document).on("click",b+" a.dirToHereTrigger",function(){this.id==="toHere-"+k.bubbleHolderId&&(a(c).fadeIn(),a(c+" input#a_address").val(f),a(c+" input#b_address").val(e),"miles"===
        K?(a("input#"+m+"_radio_miles").prop("checked",!0),a("input#"+m+"_radio_km").prop("checked",!1)):"km"===K&&(a("input#"+m+"_radio_km").prop("checked",!0),a("input#"+m+"_radio_miles").prop("checked",!1)))});a(document).on("click",b+" a.dirFromHereTrigger",function(){this.id==="fromHere-"+k.bubbleHolderId&&(a(c).fadeIn(),a(c+" input#a_address").val(e),a(c+" input#b_address").val(f),"miles"===K?(a("input#"+m+"_radio_miles").prop("checked",!0),a("input#"+m+"_radio_km").prop("checked",!1)):"km"===K&&(a("input#"+
        m+"_radio_km").prop("checked",!0),a("input#"+m+"_radio_miles").prop("checked",!1)))});a(document).on("click",c+" div.d_close-wrapper",function(d){t(c);a(this).parent().fadeOut();G.setMap(null);g.html("");g.hide();a(c+" button#print_sub").hide();u();return!1})}function N(d,k,c){X.getPanoramaByLocation(d.position,50,function(b,e){if(e===google.maps.StreetViewStatus.OK)a(document).on("click","a#trigger-"+k.bubbleHolderId,function(){var b={navigationControl:!0,enableCloseButton:!0,addressControl:!1,linksControl:!0,
        scrollwheel:!1,addressControlOptions:{position:google.maps.ControlPosition.BOTTOM},position:d.position,pov:{heading:165,pitch:0,zoom:1}},g=new google.maps.StreetViewPanorama(document.getElementById("bubble-"+k.bubbleHolderId),b);g.setVisible(!0);google.maps.event.addListener(C,"closeclick",function(){t(c);a(c).fadeOut();null!=g&&(g.unbind("position"),g.setVisible(!1));g=null});google.maps.event.addListener(g,"closeclick",function(){null!=g&&(g.unbind("position"),g.setVisible(!1),a("div#bubble-"+k.bubbleHolderId).css("background",
        "none"));g=null})});else f.warn("There is not street view available for this marker location: "+d.position+" status: "+e),a(document).on("click","a#trigger-"+k.bubbleHolderId,function(a){a.preventDefault()}),a("a#trigger-"+k.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important"),google.maps.event.addListener(C,"domready",function(){a("a#trigger-"+k.bubbleHolderId).removeAttr("href");a("a#trigger-"+k.bubbleHolderId).attr("style","text-decoration: none !important; color: #ddd !important")})})}
        function Z(){var d="div#direction-controls-placeholder-"+m,k=a("div#rendered-directions-placeholder-"+m);a(document).on("click",d+" a#reverse-btn",function(c){c=a(d+" input#a_address").val();var g=a(d+" input#b_address").val();a(d+" input#a_address").val(g);a(d+" input#b_address").val(c);return!1});a(document).on("click",d+" a#d_options_show",function(){a(d+" a#d_options_hide").show();a(d+" a#d_options_show").hide();a(d+" div#d_options").show();return!1});a(document).on("click",d+" a#d_options_hide",
            function(){a(d+" a#d_options_hide").hide();a(d+" a#d_options_show").show();a(d+" div#d_options").hide();a("input#"+m+"_avoid_hway").prop("checked",!1);a("input#"+m+"_avoid_tolls").prop("checked",!1);a("input#"+m+"_radio_km").prop("checked",!1);a("input#"+m+"_radio_miles").prop("checked",!0);return!1});a(document).on("click",d+" button#d_sub",function(){var c=a(d+" input#a_address").val(),g=a(d+" input#b_address").val(),b=!1;if(null==c||""==c)a(d+" input#a_address").addClass("d_error"),b=!0;if(null==
            g||""==g)a(d+" input#b_address").addClass("d_error"),b=!0;if(!b){a(d+" button#d_sub").prop("disabled",!0).html("Please wait..");var e=google.maps.DirectionsTravelMode.DRIVING;a(d+" a#dir_w_btn").hasClass("selected")&&(e=google.maps.DirectionsTravelMode.WALKING);var b=a("input#"+m+"_avoid_hway").is(":checked"),h=a("input#"+m+"_avoid_tolls").is(":checked"),n=a("input#"+m+"_radio_miles").is(":checked"),e={origin:c,destination:g,travelMode:e,provideRouteAlternatives:!0};b&&(e.avoidHighways=!0);h&&(e.avoidTolls=
            !0);e.unitSystem=n?google.maps.DirectionsUnitSystem.IMPERIAL:google.maps.DirectionsUnitSystem.METRIC;Y.route(e,function(b,e){e==google.maps.DirectionsStatus.OK?(k.html(""),k.show(),G.setMap(s),G.setDirections(b),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"),a(d+" button#print_sub").fadeIn(),C.close()):(f.error('Could not route directions from "'+c+'" to "'+g+'", got result from Google: '+e),k.html("<span style='font-size: 12px; font-weight: bold; color: red'>Could not route directions from<br />'"+
            c+"' to<br />'"+g+"'<br />Got result from Google: ["+e+"]</span>"),a(d+" button#print_sub").hide(),a(d+" button#d_sub").removeAttr("disabled").html("Get directions"))})}});a(document).on("click",d+" button#print_sub",function(){var c=a(d+" input#a_address").val(),b=a(d+" input#b_address").val(),k="d";a(d+" a#dir_w_btn").hasClass("selected")&&(k="w");c="http://maps.google.com/?saddr="+c+"&daddr="+b+"&dirflg="+k+"&pw=2";c=a("input#"+m+"_radio_miles").is(":checked")?c+"&doflg=ptm":c+"&doflg=ptk";"d"===
            k&&(k=a("input#"+m+"_avoid_hway").is(":checked"),b=a("input#"+m+"_avoid_tolls").is(":checked"),k&&(c+="&dirflg=h"),b&&(c+="&dirflg=t"));window.open(c);return!1});a(document).on("change focus",d+" input#a_address",function(){a(d+" input#a_address").removeClass("d_error");return!1});a(document).on("change focus",d+" input#b_address",function(){a(d+" input#b_address").removeClass("d_error");return!1});a(document).on("click",d+" .kd-button",function(){var c=this.id;"dir_d_btn"==c?a(d+" a#dir_d_btn").hasClass("selected")?
            f.warn("Driving travel mode is already selected"):(a(d+" a#dir_d_btn").addClass("selected"),a(d+" a#dir_w_btn").removeClass("selected")):"dir_w_btn"==c&&(a(d+" a#dir_w_btn").hasClass("selected")?f.warn("Walking travel mode is already selected"):(a(d+" a#dir_w_btn").addClass("selected"),a(d+" a#dir_d_btn").removeClass("selected")));return!1})}function $(a,b){var c=Math.floor(111111*Math.random()),c=c+"-"+m,g="<div id='bubble-"+c+"' style='height: 130px !important; width: 300px !important;' class='bubble-content'>";
            if(!b.geoMashup||b.geoMashup&&!b.infoBubbleContainPostLink)g+="<h4>"+SGMPGlobal.address+":</h4>",g+="<p class='custom-bubble-text'>"+a+"</p>",""!=b.customBubbleText&&(g+="<p class='custom-bubble-text'>"+b.customBubbleText+"</p>");else var e=b.postTitle.substring(0,30),g=g+""+("<p class='geo-mashup-post-title'><a title='Original post: "+b.postTitle+"' href='"+b.postLink+"'>"+e+"..</a></p>"),g=g+("<p class='geo-mashup-post-excerpt'>"+b.postExcerpt+"</p>");g+="<div class='custom-bubble-links-section'>";
            g+="<hr />";g+="<p class='custom-bubble-text'>"+SGMPGlobal.directions+": <a id='toHere-"+c+"' class='dirToHereTrigger' href='javascript:void(0);'>"+SGMPGlobal.toHere+"</a> - <a id='fromHere-"+c+"' class='dirFromHereTrigger' href='javascript:void(0);'>"+SGMPGlobal.fromHere+"</a> | <a id='trigger-"+c+"' class='streetViewTrigger' href='javascript:void(0);'>"+SGMPGlobal.streetView+"</a></p>";g+="</div></div>";return{bubbleHolderId:c,bubbleContent:g}}function q(a,b,c){var e={clickable:!1,cursor:"pointer",
            draggable:!1,flat:!0,icon:{url:SGMPGlobal.customMarkersUri+"gpsloc.png",size:new google.maps.Size(34,34),scaledSize:new google.maps.Size(17,17),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(8,8)},optimized:!1,position:new google.maps.LatLng(0,0),title:"Current location",zIndex:2};b&&(e=this.copyOptions_(e,b));b={clickable:!1,radius:0,strokeColor:"1bb6ff",strokeOpacity:0.4,fillColor:"61a0bf",fillOpacity:0.4,strokeWeight:1,zIndex:1};c&&(b=this.copyOptions_(b,c));this.marker_=new google.maps.Marker(e);
            this.circle_=new google.maps.Circle(b);this.map=this.position=this.accuracy=null;this.set("minimum_accuracy",null);this.set("position_options",{enableHighAccuracy:!0,maximumAge:1E3});this.circle_.bindTo("map",this.marker_);a&&this.setMap(a)}var x,E,K,R,I,Q,s,H,W,B,J,L,m,S,z,C,X,G,Y,w=null,V=!1,T=!1,O=!1,P=[],F=[],U={};q.prototype=new google.maps.MVCObject;q.prototype.set=function(a,b){if(/^(?:position|accuracy)$/i.test(a))throw"'"+a+"' is a read-only property.";/map/i.test(a)?this.setMap(b):google.maps.MVCObject.prototype.set.apply(this,
            arguments)};q.prototype.marker_=null;q.prototype.circle_=null;q.prototype.getMap=function(){return this.map};q.prototype.getPositionOptions=function(){return this.get("position_options")};q.prototype.setPositionOptions=function(a){this.set("position_options",a)};q.prototype.getPosition=function(){return this.position};q.prototype.getBounds=function(){return this.position?this.circle_.getBounds():null};q.prototype.getAccuracy=function(){return this.accuracy};q.prototype.getMinimumAccuracy=function(){return this.get("minimum_accuracy")};
        q.prototype.setMinimumAccuracy=function(a){this.set("minimum_accuracy",a)};q.prototype.watchId_=-1;q.prototype.setMap=function(a){this.map=a;this.notify("map");a?this.watchPosition_():(this.marker_.unbind("position"),this.circle_.unbind("center"),this.circle_.unbind("radius"),this.position=this.accuracy=null,navigator.geolocation.clearWatch(this.watchId_),this.watchId_=-1,this.marker_.setMap(a))};q.prototype.setMarkerOptions=function(a){this.marker_.setOptions(this.copyOptions_({},a))};q.prototype.setCircleOptions=
            function(a){this.circle_.setOptions(this.copyOptions_({},a))};q.prototype.updatePosition_=function(a){var b=new google.maps.LatLng(a.coords.latitude,a.coords.longitude),c=null==this.marker_.getMap();if(c){if(null!=this.getMinimumAccuracy()&&a.coords.accuracy>this.getMinimumAccuracy())return;this.marker_.setMap(this.map);this.marker_.bindTo("position",this);this.circle_.bindTo("center",this,"position");this.circle_.bindTo("radius",this,"accuracy")}this.accuracy!=a.coords.accuracy&&google.maps.MVCObject.prototype.set.call(this,
            "accuracy",a.coords.accuracy);!c&&null!=this.position&&this.position.equals(b)||google.maps.MVCObject.prototype.set.call(this,"position",b)};q.prototype.watchPosition_=function(){var a=this;navigator.geolocation&&(this.watchId_=navigator.geolocation.watchPosition(function(b){a.updatePosition_(b)},function(b){google.maps.event.trigger(a,"geolocation_error",b)},this.getPositionOptions()))};q.prototype.copyOptions_=function(a,b){for(var c in b)!0!==q.DISALLOWED_OPTIONS[c]&&(a[c]=b[c]);return a};q.DISALLOWED_OPTIONS=
        {map:!0,position:!0,radius:!0};return{init:function(a,b,c,e){F=e;s=a;m=s.getDiv().id;W=b;K=c;T="false"!==e.enablemarkerclustering;U=google.maps.event.addListener(s,"click",function(){u()});x=[];E=[];L=5;B=J=H=I=null;R=Q=!1;S=new google.maps.Geocoder;z=new google.maps.LatLngBounds;C=new google.maps.InfoWindow;X=new google.maps.StreetViewService;Y=new google.maps.DirectionsService;rendererOptions={draggable:!0};G=new google.maps.DirectionsRenderer(rendererOptions);G.setPanel(document.getElementById("rendered-directions-placeholder-"+
            m))},setGeoLocationIfEnabled:function(a){"true"===a&&is_mobile_device()&&(w=new q,google.maps.event.addListenerOnce(w,"position_changed",function(){s.setCenter(this.getPosition());s.fitBounds(this.getBounds())}),google.maps.event.addListener(w,"geolocation_error",function(a){f.error("There was an error obtaining your position. Message: "+a.message);w=null}),w.setPositionOptions({enableHighAccuracy:!0,timeout:6E3,maximumAge:0}),w.setMap(s))},buildAddressMarkers:function(a,f,c){R=!0;H=y.trim(a);H=y.searchReplace(H,
            "'","");"true"===f?(V=!0,a=p(H),"true"===c?n(a,!0):"false"===c&&n(a,!1)):null!=f&&"false"!==f||b(H,"","","",!1,!1);r();h()},isBuildAddressMarkersCalled:function(){return R}}},y=function(){return{isNumeric:function(a){return/^([0-9?(\-.,;\s{1,})]+)$/.test(a)},isAlphaNumeric:function(a){return/^([a-zA-Z0-9?(/\-.,\s{1,})]+)$/.test(a)},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},searchReplace:function(a,f,h){return a.replace(RegExp(f,"g"),h)}}}(),f=function(){var a=function(a){navigator.userAgent.match(/msie|trident/i)||
    console.log(a)};return{info:function(f){a("Info :: "+f)},raw:function(f){a(f)},warn:function(f){a("Warning :: "+f)},error:function(f){a("Error :: "+f)},fatal:function(f){a("Fatal :: "+f)}}}();(function(){return{alertError:function(e){function f(b,e){b.preventDefault();var h=a(e).closest("div.sgmp-popup-shortcode-dialog");h&&a(h).remove();0==a("div.sgmp-popup-shortcode-dialog").length&&a("#sgmp-popup-mask").remove()}var h=a('<div id="sgmp-popup-mask"/>'),b=Math.random().toString(36).substring(3),l=
    a('<div id="'+b+'" class="sgmp-popup-shortcode-dialog sgmp-popup-window">');l.html("<div class='dismiss-container'><a class='dialog-dismiss' href='javascript:void(0)'>x</a></div><p style='text-align: left; padding: 10px 10px 0 10px'>"+e+"</p><div align='center'><input type='button' class='close-dialog' value='Close' /></div>");a("body").append(h);a("body").append(l);e=a(document).height();h=a(window).width();a("#sgmp-popup-mask").css({width:h,height:e,opacity:0.1});1==a("#sgmp-popup-mask").length&&
a("#sgmp-popup-mask").show();e=a(window).height();h=a(window).width();a("div#"+b).css("top",e/2-a("div#"+b).height()/2);a("div#"+b).css("left",h/2-a("div#"+b).width()/2);a("div#"+b).fadeIn(500);a(".sgmp-popup-window .close-dialog").click(function(b){f(b,a(this))});a(".sgmp-popup-window .dialog-dismiss").click(function(b){f(b,a(this))});a("#sgmp-popup-mask").click(function(){a(this).remove();a(".sgmp-popup-window").remove()});a(window).resize(function(){var b=a(".window"),e=a(document).height(),f=
    a(window).width();a("#sgmp-popup-mask").css({width:f,height:e});e=a(window).height();f=a(window).width();b.css("top",e/2-b.height()/2);b.css("left",f/2-b.width()/2)})}}})();t=document.head||document.getElementsByTagName("head")[0]||document.documentElement;r=document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=SGMPGlobal.cssHref;r.media="screen";t.appendChild(r);t=parseFloat(a.fn.jquery.split(".")[0]);r=parseFloat(a.fn.jquery.split(".")[1]);(1>t||1<=t&&2>t&&9>r)&&f.fatal("Client uses jQuery older than the version 1.9.0, check if he is using jQuery Migrate plugin");
    if("undefined"===typeof google||!google)return f.fatal("We do not have reference to Google API. Aborting map generation .."),!1;if("undefined"!==typeof GMap2&&GMap2)return f.fatal("It looks like the webpage has reference to GMap2 object from Google API v2. Aborting map generation .."),!1;google.load("maps","3",{other_params:"sensor=false&libraries=panoramio&language="+SGMPGlobal.language,callback:function(){h()}})})("undefined"!==typeof h&&null!=h&&h?h:jQuery)}if("undefined"===typeof jQuery||null==
    jQuery){var r=!1,v=document.head||document.getElementsByTagName("head")[0]||document.documentElement,h=document.createElement("script");h.type="text/javascript";h.src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";h.onload=h.onreadystatechange=function(){if(!r&&(!this.readyState||/loaded|complete/.test(h.readyState))){r=!0;var u=jQuery.noConflict();p(u);h.onload=h.onreadystatechange=null;v&&h.parentNode&&v.removeChild(h);h=void 0}};v.appendChild(h)}else p()})();
function is_mobile_device(){var p=navigator.userAgent;return"undefined"!==typeof p&&""!=p?p.match(/Android|BlackBerry|IEMobile|i(Phone|Pad|Pod)|Kindle|MeeGo|NetFront|Nokia|Opera M(ob|in)i|Pie|PalmOS|PDA|Polaris|Plucker|Samsung|SonyEricsson|SymbianOS|UP.Browser|Vodafone|webOS|Windows Phone/i):!1}
function base64_decode(p){var r,v,h,u,a,A=0,M=0;u="";var t=[];if(!p)return p;p+="";do r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(p.charAt(A++)),v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(p.charAt(A++)),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(p.charAt(A++)),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(p.charAt(A++)),h=r<<18|v<<12|u<<6|a,r=h>>16&255,v=h>>8&255,
    h&=255,64==u?t[M++]=String.fromCharCode(r):64==a?t[M++]=String.fromCharCode(r,v):t[M++]=String.fromCharCode(r,v,h);while(A<p.length);return u=t.join("")};
